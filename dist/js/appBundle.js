!function e(t,a,n){function s(l,i){if(!a[l]){if(!t[l]){var c="function"==typeof require&&require;if(!i&&c)return c(l,!0);if(r)return r(l,!0);var o=new Error("Cannot find module '"+l+"'");throw o.code="MODULE_NOT_FOUND",o}var d=a[l]={exports:{}};t[l][0].call(d.exports,function(e){var a=t[l][1][e];return s(a?a:e)},d,d.exports,e,t,a,n)}return a[l].exports}for(var r="function"==typeof require&&require,l=0;l<n.length;l++)s(n[l]);return s}({1:[function(e,t,a){"use strict";var n=e("react"),s=e("react-dom").render,r=e("./components/App");s(n.createElement(r,null),document.getElementById("root"))},{"./components/App":2,react:"react","react-dom":"react-dom"}],2:[function(e,t,a){"use strict";var n=e("react"),s=e("lodash");e("whatwg-fetch");var r=e("./NewsElement"),l=(e("./Modal"),n.createClass({displayName:"App",getInitialState:function(){return{news:[],searchString:"",isLoad:!1}},componentDidMount:function(){var e=this;fetch("/v1/news").then(function(e){return e.json()}).then(function(t){var a=t.data;e.setState({news:a,isLoad:!0})})},searchHandler:function(e){this.setState({searchString:e.target.value.trim()})},setArticleValues:function(e,t){var a=s.clone(this.state.news),n=s.find(this.state.news,{id:e});s.merge(n,t),this.setState({news:a})},render:function(){var e=this,t=this.state;if(!t.isLoad)return n.createElement("div",{className:"load-container center"},n.createElement("div",{className:"load-speeding-wheel"}));var a=t.news;t.searchString&&(a=a.filter(function(e){return e.title.trim().toLowerCase().indexOf(t.searchString.toLowerCase())>-1}));var s=a.sort(function(e,t){return e.likes>t.likes?-1:e.likes<t.likes?1:0}).map(function(t){return n.createElement(r,{news:t,setArticleValues:e.setArticleValues,key:t.id})});return n.createElement("div",null,n.createElement("nav",{className:"navbar navbar-default"},n.createElement("div",{className:"container-fluid"},n.createElement("div",{className:"navbar-header"},n.createElement("a",{className:"navbar-brand",href:"#"},"News")),n.createElement("div",{className:"navbar-form navbar-right"},n.createElement("div",{className:"input-group"},n.createElement("input",{type:"text",className:"form-control",placeholder:"Search",value:t.searchString,onChange:this.searchHandler}),n.createElement("span",{className:"input-group-addon"},n.createElement("span",{className:"glyphicon glyphicon-search"})))))),s.length?s:n.createElement("h2",{className:"text-center"},"Not found"))}}));t.exports=l},{"./Modal":3,"./NewsElement":4,lodash:"lodash",react:"react","whatwg-fetch":"whatwg-fetch"}],3:[function(e,t,a){"use strict";var n=e("react"),s=n.createClass({displayName:"Modal",openHandler:function(){document.body.classList.add("modal-open")},closeHandler:function(e){e.target===e.currentTarget&&(document.body.classList.remove("modal-open"),this.props.onCloseHandler())},componentDidMount:function(){this.props.isOpen?this.openHandler():this.closeHandler()},render:function(){var e=this.props;return n.createElement("div",null,n.createElement("div",{className:"modal fade "+(e.isOpen?"in block":""),onClick:this.closeHandler},n.createElement("div",{className:"modal-dialog"},n.createElement("div",{className:"modal-content"},n.createElement("div",{className:"modal-header"},n.createElement("button",{className:"close",onClick:this.closeHandler},"Ã—"),n.createElement("h4",null,e.modalTitle)),e.children))),n.createElement("div",{className:"modal-backdrop fade "+(e.isOpen?"in":"")}))}});t.exports=s},{react:"react"}],4:[function(e,t,a){"use strict";var n=e("react"),s=e("./Modal");e("whatwg-fetch");var r=n.createClass({displayName:"NewsElement",getInitialState:function(){return{modalIsOpen:!1,isLike:!1,likes:0}},openModalHandler:function(){this.setState({modalIsOpen:!0})},closeModalHandler:function(){this.setState({modalIsOpen:!1})},setLikeHandler:function(){var e=this,t=!this.state.isLike,a=this.props.news.id;fetch("/v1/like/"+a,{method:t?"POST":"DELETE"}).then(function(e){return e.json()}).then(function(n){var s=n.likes;e.setState({isLike:t,likes:s},function(){e.props.setArticleValues(a,{likes:s,isLike:t})})})},componentDidMount:function(){this.setState({likes:this.props.news.likes,isLike:Boolean(this.props.news.isLike)})},render:function(){var e=this.props.news,t=this.state,a=e.description.slice(0,25)+"...";return n.createElement("div",null,n.createElement("div",{className:"news",onClick:this.openModalHandler},n.createElement("div",{className:"news-img-container pull-left"},n.createElement("img",{className:"news-img",src:e.poster,alt:""})),n.createElement("div",{className:"news-body"},n.createElement("h4",{className:"news-title"},e.title),n.createElement("p",{className:"news-desc"},a)),n.createElement("div",{className:"news-views text-right"},n.createElement("span",{className:"glyphicon glyphicon-thumbs-up  "+(t.isLike?"like":"")})," ",t.likes)),t.modalIsOpen?n.createElement(s,{isOpen:t.modalIsOpen,modalTitle:e.title,onCloseHandler:this.closeModalHandler},n.createElement("div",{className:"modal-body"},n.createElement("img",{className:"modal-img",src:e.poster,alt:e.title}),e.description),n.createElement("div",{className:"modal-footer"},n.createElement("button",{className:"btn btn-like "+(t.isLike?"btn-primary":""),onClick:this.setLikeHandler},n.createElement("span",{className:"glyphicon glyphicon-thumbs-up"}),n.createElement("span",{className:"badge"},t.likes)))):void 0)}});t.exports=r},{"./Modal":3,react:"react","whatwg-fetch":"whatwg-fetch"}]},{},[1]);